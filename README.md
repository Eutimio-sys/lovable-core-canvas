# ğŸ’ AI Content & Automation Platform

> Create once, launch everywhere â€” powered by AI automation

A full-stack SaaS platform for creating and managing AI-generated content (text, images, videos, voice) with scheduling, automation, and multi-tenant workspace management.

## ğŸŒŸ Features

### Phase 1 (MVP) - **Complete âœ…**

- âœ… **Multi-tenant Workspaces** - Organizations with member management and RBAC
- âœ… **Content Studio** - AI-powered text generation (posts, captions, articles, scripts)
- âœ… **Media Studio** - AI generation for:
  - ğŸ–¼ï¸ Images (various styles and sizes)
  - ğŸ¬ Videos (cinematic, animation, time-lapse)
  - ğŸ™ï¸ Voice (text-to-speech with multiple voices)
- âœ… **Asset Library** - Centralized media management with database storage
- âœ… **Job Queue System** - Async processing with real-time status
- âœ… **Wallet & Credits** - Usage-based billing with multiple plans
- âœ… **Dashboard** - Real-time analytics and activity tracking
- âœ… **Team Management** - Invite members with granular role permissions

### Phase 2 (Scheduler & Automation) - **Complete âœ…**

- âœ… **Content Scheduler** - Schedule posts across multiple social media platforms
  - Create and manage scheduled posts
  - Multi-platform publishing (Facebook/Instagram, X, LinkedIn, TikTok)
  - Calendar view for upcoming and past posts
  - Credit hold and finalization system
- âœ… **Social Connections** - Connect and manage social media accounts
  - Mock OAuth integration for social platforms
  - Channel status monitoring (active/expired)
  - Token management for API access
- âœ… **Automation Builder** - Create automated workflows
  - Visual flow builder with triggers and actions
  - Test runs for debugging
  - Active/inactive flow management
  - Credit estimation and tracking
- âœ… **Social Adapter Layer (SAL)** - Unified API for social media
  - Provider-agnostic architecture
  - Mock implementations for all platforms
  - Post formatting and media handling
- âœ… **Edge Functions** - Backend automation services
  - `scheduler-publish`: Manage scheduled posts
  - `channels`: Handle social media connections
  - `automation-engine`: Execute automation workflows
  - `scheduler-worker`: Cron job for publishing (ready for pg_cron)

### Upcoming Features

- ğŸ’³ **Stripe Billing** (Phase 3) - Real payment processing
- ğŸ“Š **Advanced Analytics** (Phase 4) - Detailed reports and insights
- ğŸ›ï¸ **Template Marketplace** (Phase 5) - Share and sell automation workflows

## ğŸ—ï¸ Architecture

### Tech Stack

- **Frontend**: React + Vite + TypeScript + Tailwind CSS
- **Backend**: Supabase (PostgreSQL + Edge Functions + Auth + Storage)
- **UI Components**: shadcn/ui with custom design system
- **State Management**: React Query (TanStack Query)
- **AI Providers**: Mock adapters (ready for Gemini, OpenAI, Stability, Runway, ElevenLabs)

### Design System

The platform features a modern AI-focused design with:
- **Colors**: Purple-cyan gradients with HSL tokens
- **Themes**: Full dark mode support
- **Effects**: Glassmorphism, glow effects, smooth animations
- **Accessibility**: Semantic tokens and WCAG compliance

## ğŸ“Š Database Schema

### Core Tables

- `workspaces` - Multi-tenant organizations
- `memberships` - User-workspace relationships with roles
- `contents` - AI-generated text content
- `assets` - Media files (images, videos, audio)
- `jobs` - Async job queue with status tracking
- `wallets` - Credit balance per workspace
- `usage_ledger` - Credit transaction history
- `invitations` - Team member invitations
- `audit_logs` - Security and compliance logging

### Phase 2 Tables

- `channels` - Connected social media accounts
- `channel_tokens` - OAuth tokens for social APIs
- `scheduled_posts` - Posts scheduled for publication
- `automation_flows` - Workflow definitions with triggers/actions
- `automation_runs` - Execution history of automation flows
- `notifications` - User alerts and system messages

### Role-Based Access Control

7 predefined roles with granular permissions:
- **Owner**: Full access to everything
- **Admin**: Manage members and settings
- **Publisher**: Create and publish content
- **Creator**: Create own content only
- **Analyst**: View analytics and reports
- **Finance**: Manage billing and credits
- **Guest**: View-only access

## ğŸš€ Getting Started

### Prerequisites

- Node.js 18+ and npm
- A Lovable account with Cloud enabled

### Installation

```bash
# Clone the repository
git clone <your-repo-url>
cd <project-name>

# Install dependencies
npm install

# Start development server
npm run dev
```

The app will be available at `http://localhost:8080`

### Environment Setup

All environment variables are pre-configured for Lovable Cloud:

```env
VITE_SUPABASE_PROJECT_ID=<auto-generated>
VITE_SUPABASE_PUBLISHABLE_KEY=<auto-generated>
VITE_SUPABASE_URL=<auto-generated>
```

## ğŸ¨ Design System Usage

### Using Semantic Tokens

```tsx
// âŒ DON'T use direct colors
<Button className="bg-purple-600 text-white">Click</Button>

// âœ… DO use design system tokens
<Button className="bg-gradient-primary">Click</Button>
```

### Custom Variants

The design system includes pre-built variants for common patterns:

```tsx
// Gradient backgrounds
<div className="bg-gradient-primary" />
<div className="bg-gradient-card" />

// Shadows and effects
<Card className="shadow-glow" />
<div className="shadow-soft" />
```

## ğŸ’° Credit System

### Pricing Model (Mock - Phase 1)

| Feature | Credits | Notes |
|---------|---------|-------|
| Text Generation | 1 | Per generation |
| Image (512x512) | 3 | Low resolution |
| Image (1024x1024) | 5 | Standard |
| Image (1536x1536) | 10 | High resolution |
| Video (5 sec) | 50 | Per 5 seconds |
| Voice (30 sec) | 1 | Per 30 seconds |

### Subscription Plans

| Plan | Price | Credits/Month | Features |
|------|-------|---------------|----------|
| Starter | Free | 20 | Basic AI, Watermarks |
| Creator | $15 | 300 | All AI models, No watermarks |
| Pro | $49 | 1,200 | Advanced models, API access |
| Team | $99 | 3,000 | Team features, Priority support |

## ğŸ”„ Mock AI Providers

Located in `src/lib/mock-providers.ts`, these simulate real AI services:

```typescript
// Text generation (Gemini/OpenAI)
const result = await generateText({
  prompt: "Write a blog post...",
  contentType: "article"
});

// Image generation (Stability/Flux)
const image = await generateImage({
  prompt: "A beautiful sunset...",
  width: 1024,
  height: 1024
});

// Video generation (Runway/Pika)
const video = await generateVideo({
  prompt: "Time-lapse of a city...",
  duration: 5
});

// Voice generation (ElevenLabs)
const audio = await generateAudio({
  text: "Hello world...",
  voice: "professional"
});
```

These can be easily replaced with real AI provider integrations.

## ğŸ§ª Testing

### Demo Workflow

1. **Generate Content**: Go to Content Studio and create a post
2. **Create Image**: Use Media Studio to generate an image
3. **Save Assets**: Save generated content to Asset Library
4. **Connect Social**: Link social media accounts in Connections
5. **Schedule Post**: Create scheduled post in Scheduler
6. **Setup Automation**: Build automated workflows in Automation Builder
7. **Monitor Jobs**: Watch the job queue in Dashboard
8. **Check Credits**: View usage in Wallet & Billing
9. **Manage Team**: Invite members in Members section

### Phase 2 Features Testing

1. **Social Connections**:
   - Navigate to Connections page
   - Click "Connect" on any social platform (mock OAuth)
   - View connected channels list

2. **Content Scheduler**:
   - Go to Scheduler page
   - Click "Schedule Post"
   - Select platforms, enter caption, and set time
   - View upcoming and past posts

3. **Automation Builder**:
   - Open Automation Builder
   - Create new automation flow
   - Set trigger (e.g., "When content is created")
   - Set action (e.g., "Schedule post")
   - Toggle flow active/inactive
   - Run test execution

### Mock Data

All pages include mock data or database integration:
- Phase 1 pages use Supabase for persistence
- Phase 2 pages use Edge Functions + database
- Social integrations use mock OAuth (ready for real providers)

## ğŸ“ Project Structure

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/          # AppSidebar, AppLayout
â”‚   â”œâ”€â”€ shared/          # Reusable components
â”‚   â””â”€â”€ ui/              # shadcn components
â”œâ”€â”€ pages/               # Main application pages
â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”œâ”€â”€ ContentStudio.tsx
â”‚   â”œâ”€â”€ MediaImage.tsx
â”‚   â”œâ”€â”€ MediaVideo.tsx
â”‚   â”œâ”€â”€ MediaVoice.tsx
â”‚   â”œâ”€â”€ AssetLibrary.tsx
â”‚   â”œâ”€â”€ Scheduler.tsx        # Phase 2
â”‚   â”œâ”€â”€ Connections.tsx      # Phase 2
â”‚   â”œâ”€â”€ AutomationBuilder.tsx # Phase 2
â”‚   â”œâ”€â”€ WalletBilling.tsx
â”‚   â”œâ”€â”€ Members.tsx
â”‚   â””â”€â”€ Settings.tsx
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ mock-providers.ts    # AI provider adapters
â”‚   â”œâ”€â”€ social-providers.ts  # Social media SAL (Phase 2)
â”‚   â””â”€â”€ utils.ts             # Utilities
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts             # TypeScript definitions
â”œâ”€â”€ integrations/
â”‚   â””â”€â”€ supabase/            # Database client & types
â”œâ”€â”€ index.css               # Design system tokens
â””â”€â”€ supabase/
    â””â”€â”€ functions/           # Edge functions
        â”œâ”€â”€ generate-image/
        â”œâ”€â”€ generate-text/
        â”œâ”€â”€ scheduler-publish/    # Phase 2
        â”œâ”€â”€ channels/             # Phase 2
        â”œâ”€â”€ automation-engine/    # Phase 2
        â””â”€â”€ scheduler-worker/     # Phase 2 (Cron)
```

## ğŸ” Security

- **RLS Policies**: All tables have Row Level Security enabled
- **RBAC**: Role-based permissions enforced at database level
- **Audit Logs**: All important actions are logged
- **2FA Support**: Two-factor authentication (Settings page)

## ğŸš€ Deployment

### Frontend (Lovable/Vercel)

```bash
npm run build
```

Deploy the `dist` folder to Lovable or Vercel.

### Database (Supabase)

Already connected via Lovable Cloud - no additional setup needed!

### Edge Functions

Edge functions auto-deploy with Lovable Cloud when you make changes.

## ğŸ“š API Documentation

### Edge Functions

**Phase 1:**
```
POST /functions/v1/generate-image    # Generate AI images
POST /functions/v1/generate-text     # Generate AI text
```

**Phase 2:**
```
# Scheduler
POST /functions/v1/scheduler-publish/create  # Create scheduled post
GET  /functions/v1/scheduler-publish/list    # List scheduled posts
POST /functions/v1/scheduler-publish/now     # Publish immediately

# Channels
POST /functions/v1/channels/connect          # Connect social account
GET  /functions/v1/channels/list             # List connected channels
DELETE /functions/v1/channels/:id            # Disconnect channel

# Automation
POST /functions/v1/automation-engine/test-run  # Test automation flow
POST /functions/v1/automation-engine/trigger   # Trigger flow execution
GET  /functions/v1/automation-engine/runs      # List automation runs

# Cron Worker (Internal)
POST /functions/v1/scheduler-worker          # Process scheduled posts
```

### Social Adapter Layer (SAL)

Located in `src/lib/social-providers.ts`, provides unified interface:

```typescript
// Example: Publish to any platform
const adapter = getProviderAdapter('facebook_ig');
const result = await adapter.publish({
  caption: "Hello world!",
  media: [...],
  channel: {...}
});

// Supported providers:
// - facebook_ig: Facebook & Instagram
// - x: X (Twitter)
// - linkedin: LinkedIn
// - tiktok: TikTok
```

## ğŸ¤ Contributing

This platform is ready for extension and customization:

**Phase 1 â†’ 2 (Completed):**
- âœ… Database schema extended with social tables
- âœ… Edge functions for scheduler and automation
- âœ… Social Adapter Layer (mock implementations)
- âœ… UI for scheduler, connections, and automation

**Next Steps (Phase 3+):**
1. Replace mock social OAuth with real providers (Facebook, X, LinkedIn, TikTok)
2. Implement real AI provider integrations (replace mock-providers.ts)
3. Add Stripe billing integration
4. Set up pg_cron for scheduler-worker edge function
5. Build analytics dashboard with real metrics
6. Create template marketplace

### Setting up Cron Jobs (Phase 2 completion)

To enable automatic post publishing, set up pg_cron:

```sql
-- Enable extensions
create extension if not exists pg_cron;
create extension if not exists pg_net;

-- Schedule worker to run every minute
select cron.schedule(
  'process-scheduled-posts',
  '* * * * *',
  $$
  select net.http_post(
    url:='https://yenbgkbykomqxncynbrh.supabase.co/functions/v1/scheduler-worker',
    headers:='{"Content-Type": "application/json", "Authorization": "Bearer YOUR_SERVICE_ROLE_KEY"}'::jsonb,
    body:='{}'::jsonb
  ) as request_id;
  $$
);
```

## ğŸ“ License

This project was created with Lovable â¤ï¸

---

**Built with**: React, TypeScript, Tailwind CSS, Supabase, Lovable Cloud  
**Design**: Modern AI Platform aesthetic with purple-cyan gradients  
**Status**: Phase 1 âœ… | Phase 2 âœ… | Phase 3+ ğŸš€
